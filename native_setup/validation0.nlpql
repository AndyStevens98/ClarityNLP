limit 100;

phenotype "Validation 0" version "1";
include ClarityCore version "1.0" called Clarity;

documentset ValidationDocs:
    Clarity.createDocumentSet({
        "report_types":["CLARITYNLP_VALIDATION_0"]
    });

///////////////////////////////////////////////////////////////////////////////
//
// ECOG CRITERIA TASK
//
///////////////////////////////////////////////////////////////////////////////

define EcogStatusResult:
    Clarity.EcogCriteriaTask ({
        documentset: [ValidationDocs]
    });


///////////////////////////////////////////////////////////////////////////////
//
// GLEASON SCORE
//
///////////////////////////////////////////////////////////////////////////////

define GleasonScore:
    Clarity.GleasonScoreTask({
        documentset: [ValidationDocs]
    });


///////////////////////////////////////////////////////////////////////////////
//
// MEASUREMENT FINDER
//
///////////////////////////////////////////////////////////////////////////////

termset LesionTerms: [
    "lesion"
];

define Measurement:
    Clarity.MeasurementFinder({
        documentset: [ValidationDocs],
        termset: [LesionTerms]
    });


///////////////////////////////////////////////////////////////////////////////
//
// O2 SATURATION TASK
//
///////////////////////////////////////////////////////////////////////////////

define O2TaskResult:
    Clarity.O2SaturationTask ({
        documentset: [ValidationDocs]
    });


///////////////////////////////////////////////////////////////////////////////
//
// PREGNANCY TASK
//
///////////////////////////////////////////////////////////////////////////////

define PregnancyTaskResult:
    Clarity.PregnancyTask ({
        documentset: [ValidationDocs]
    });


///////////////////////////////////////////////////////////////////////////////
//
// PROVIDER ASSERTION
//
///////////////////////////////////////////////////////////////////////////////

termset FeverTerms: [
    "fever"
];

define hasFever:
    Clarity.ProviderAssertion({
        documentset: [ValidationDocs],
        termset: [FeverTerms]
    });


///////////////////////////////////////////////////////////////////////////////
//
// RACE FINDER
//
///////////////////////////////////////////////////////////////////////////////

define Race:
    Clarity.RaceFinderTask({
        documentset: [ValidationDocs]
    });


///////////////////////////////////////////////////////////////////////////////
//
// TERM FINDER
//
///////////////////////////////////////////////////////////////////////////////

termset ValidationTerms: [
    "rales",
    "wheezing",
    "coughing",
    "walking"
];

define TermFinderResult:
    Clarity.TermFinder ({
        termset: [ValidationTerms],
        documentset: [ValidationDocs]
    });


///////////////////////////////////////////////////////////////////////////////
//
// TERM PROXIMITY
//
///////////////////////////////////////////////////////////////////////////////

termset ProstateTerms: [
    "prostate"
];

define hasProstateCancer:
    Clarity.TermProximityTask({
        documentset: [ValidationDocs],
        "termset1": [ProstateTerms],
        "termset2": "cancer, Gleason, Gleason's, Gleasons",
        "word_distance": 5,
        "any_order": "True"
    });


///////////////////////////////////////////////////////////////////////////////
//
// TNM STAGER
//
///////////////////////////////////////////////////////////////////////////////

define TNMCode:
    Clarity.TNMStager ({
        documentset: [ValidationDocs]
    });


///////////////////////////////////////////////////////////////////////////////
//
// VALUE EXTRACTION
//
///////////////////////////////////////////////////////////////////////////////

termset EjectionFractionTerms: [
    "ejection fraction",
    "lvef"
];

define EjectionFraction:
    Clarity.ValueExtraction({
        documentset: [ValidationDocs],
        termset:[EjectionFractionTerms],
        minimum_value: "10",
        maximum_value: "85"
    });


// logical Context (Patient, Document)
context Patient;

